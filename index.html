<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
<h2>Crime Mapping</h2>

<link href='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css' rel='stylesheet' />
   <style>
    *{
        margin: 0;
        padding: 0;
    }
     #map{
        width: 100vw;
        height: 100vh;

     }
   </style>
   
    <title>Crime Map</title>
</head>
<body>
    <div id='map' ></div>
    
</body>


<script src='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js'></script>


<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYW51ajIwMDIiLCJhIjoiY2w1b2J0enBpMWMwbzNkbm1pMXd5NGw3dCJ9.lnQ9LGsayC4EwFlR5PSsrQ';
const map = new mapboxgl.Map({
    container: 'map', // container ID
    style: 'mapbox://styles/mapbox/streets-v11', // style URL
    center: [-74.5, 40], // starting position [lng, lat]
    zoom: 1, // starting zoom
    projection: 'globe'
});

map.on('click', function(e){
    let marker = new mapboxgl.Marker().setLngLat(e.lngLat).addTo(map);
    marker.on('click', function(){
        console.log('hello');
    });
});
// <Popup
//                 key={p._id}
//                 latitude={p.lat}
//                 longitude={p.long}
//                 closeButton={true}
//                 closeOnClick={false}
//                 onClose={() => setCurrentPlaceId(null)}
//                 anchor="left"
//               >
//                 <div className="card">
//                   <label>Place</label>
//                   <h4 className="place">{p.title}</h4>
//                   <label>Review</label>
//                   <p className="desc">{p.desc}</p>
//                   <label>Rating</label>
//                   <div className="stars">
//                     {Array(p.rating).fill(<Star className="star" />)}
//                   </div>
//                   <label>Information</label>
//                   <span className="username">
//                     Created by <b>{p.username}</b>
//                   </span>
//                   <span className="date">{format(p.createdAt)}</span>
//                 </div>
//               </Popup>
//  </script> 
<!-- <div id='map-popups-js' class='map'></div>
<script>
const mapPopupsJS = L.mapbox.map('map-popups-js')
  .setView([37.8, -96], 4)
  .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/light-v10'));
const myLayer = L.mapbox.featureLayer().addTo(mapPopupsJS);

const geojson = [
  {
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [74.2179, 38.913184]
    },
    properties: {
      title: 'Mapbox DC',
      description: '1714 14th St NW, Washington DC',
      image: 'https://farm9.staticflickr.com/8604/15769066303_3e4dcce464_n.jpg',
      icon: {
        iconUrl: 'https://docs.mapbox.com/mapbox.js/assets/images/astronaut1.png',
        iconSize: [50, 50], // size of the icon
        iconAnchor: [25, 25], // point of the icon which will correspond to marker's location
        popupAnchor: [0, -25], // point from which the popup should open relative to the iconAnchor
        className: 'dot'
      }
    }
  },
  
  
];

// Set a custom icon on each marker based on feature properties.
myLayer.on('layeradd', (event) => {
  event.layer.setIcon(L.icon(event.layer.feature.properties.icon));
  const content = `<p><strong>${layer.feature.properties.title}</strong></p><img src='${layer.feature.properties.image}' alt=''>`;
  layer.bindPopup(content);
});
myLayer.setGeoJSON(geojson);
mapPopupsJS.scrollWheelZoom.disable(); -->
</script>

<script src="index.js"></script>
</html>
